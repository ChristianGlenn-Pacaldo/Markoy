<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Valentine's Day üíú</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            position: relative;
            padding: 20px;
        }

        /* Slideshow Background */
        .slideshow-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .slideshow-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: 1;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 2s ease-in-out;
            background-size: cover;
            background-position: center;
        }

        .slide.active {
            opacity: 1;
        }

        /* Gradient backgrounds for slides */
        .slide:nth-child(1) {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        }

        .slide:nth-child(2) {
            background: linear-gradient(135deg, #f5576c 0%, #f093fb 50%, #764ba2 100%);
        }

        .slide:nth-child(3) {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 50%, #f5576c 100%);
        }

        .slide:nth-child(4) {
            background: linear-gradient(135deg, #f093fb 0%, #764ba2 50%, #667eea 100%);
        }

        /* Floating Hearts Background */
        .heart-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
            overflow: hidden;
        }

        .floating-heart {
            position: absolute;
            font-size: 20px;
            animation: float 8s infinite ease-in-out;
            opacity: 0.6;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            50% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Main Container */
        .container {
            position: relative;
            z-index: 10;
            max-width: 500px;
            width: 100%;
        }

        /* Main Card */
        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 40px 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            animation: fadeIn 1s ease-in;
            backdrop-filter: blur(10px);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        h1 {
            color: #764ba2;
            font-size: 2.2em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .message {
            color: #555;
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .question {
            color: #764ba2;
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 30px;
        }

        /* Buttons */
        .buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            position: relative;
            min-height: 60px;
        }

        button {
            padding: 15px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .yes-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .yes-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(245, 87, 108, 0.4);
        }

        .no-btn {
            background: linear-gradient(135deg, #a8a8a8 0%, #6c6c6c 100%);
            color: white;
            position: absolute;
            transition: all 0.3s ease;
        }

        .no-btn:hover {
            transform: scale(1.05);
        }

        /* Playful Text */
        .playful-text {
            color: #764ba2;
            font-size: 1.1em;
            margin-top: 20px;
            font-weight: bold;
            min-height: 30px;
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Success Message */
        .success-message {
            display: none;
            color: #f5576c;
            font-size: 1.5em;
            font-weight: bold;
            margin: 20px 0;
            animation: heartbeat 1s infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f5576c;
            position: absolute;
            animation: confetti-fall 3s ease-out forwards;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Receipt Card */
        .receipt-card {
            display: none;
            background: linear-gradient(135deg, #f5f5ff 0%, #ffe6f0 100%);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            border: 3px dashed #764ba2;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: slideIn 0.8s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .receipt-title {
            color: #764ba2;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-decoration: underline;
        }

        /* Photo Upload Section */
        .photo-section {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin: 20px 0 30px 0;
            flex-wrap: wrap;
        }

        .photo-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .photo-preview {
            width: 120px;
            height: 120px;
            border: 3px dashed #764ba2;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            position: relative;
            overflow: hidden;
        }

        .photo-preview:hover {
            border-color: #f5576c;
            transform: scale(1.05);
        }

        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        .photo-preview.has-image img {
            display: block;
        }

        .photo-preview.has-image .photo-placeholder {
            display: none;
        }

        .photo-placeholder {
            text-align: center;
            color: #764ba2;
        }

        .photo-placeholder span {
            font-size: 2em;
            display: block;
            margin-bottom: 5px;
        }

        .photo-label {
            font-weight: bold;
            color: #764ba2;
            font-size: 0.9em;
        }

        .photo-upload input[type="file"] {
            display: none;
        }

        .receipt-row {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            align-items: center;
            flex-wrap: wrap;
        }

        .receipt-label {
            font-weight: bold;
            color: #555;
            flex: 1;
            min-width: 120px;
        }

        .receipt-value {
            color: #764ba2;
            font-weight: bold;
            flex: 1;
            text-align: right;
        }

        input[type="text"] {
            padding: 10px;
            border: 2px solid #764ba2;
            border-radius: 10px;
            font-size: 1em;
            width: 100%;
            max-width: 200px;
            text-align: center;
            background: white;
        }

        .submit-btn {
            margin-top: 20px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 12px 40px;
            font-size: 1.1em;
        }

        .submit-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(245, 87, 108, 0.4);
        }

        .receipt-footer {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px dashed #764ba2;
            font-style: italic;
            color: #f5576c;
            font-size: 1.2em;
        }

        .download-btn {
            margin-top: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            font-size: 1em;
        }

        .download-btn:hover {
            transform: scale(1.05);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal.show {
            display: flex;
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px 30px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlideIn 0.5s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #f5576c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            font-size: 1.2em;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: #764ba2;
            transform: rotate(90deg);
        }

        .modal-receipt {
            text-align: center;
        }

        .modal-receipt-title {
            color: #764ba2;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-decoration: underline;
        }

        .modal-photo-section {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin: 20px 0 30px 0;
            flex-wrap: wrap;
        }

        .modal-photo-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .modal-photo-frame {
            width: 120px;
            height: 120px;
            border: 3px solid #764ba2;
            border-radius: 15px;
            overflow: hidden;
            background: #f5f5ff;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-photo-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-photo-frame .no-photo {
            color: #764ba2;
            font-size: 0.9em;
            text-align: center;
            padding: 10px;
        }

        .modal-info-row {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px 0;
            border-bottom: 1px dashed #ddd;
        }

        .modal-info-label {
            font-weight: bold;
            color: #555;
        }

        .modal-info-value {
            color: #764ba2;
            font-weight: bold;
        }

        .modal-footer {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px dashed #764ba2;
            font-style: italic;
            color: #f5576c;
            font-size: 1.2em;
        }

        .modal-download-btn {
            margin-top: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            font-size: 1em;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .modal-download-btn:hover {
            transform: scale(1.05);
        }

        /* Music Control */
        .music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 100;
            transition: all 0.3s ease;
            font-size: 1.5em;
        }

        .music-control:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 1);
        }

        .music-control.playing {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            }
            50% {
                box-shadow: 0 5px 25px rgba(245, 87, 108, 0.6);
            }
        }

        /* Mobile Responsiveness */
        @media (max-width: 600px) {
            h1 {
                font-size: 1.8em;
            }

            .message {
                font-size: 1em;
            }

            .question {
                font-size: 1.2em;
            }

            button {
                padding: 12px 30px;
                font-size: 1em;
            }

            .card {
                padding: 30px 20px;
            }

            .receipt-card {
                padding: 20px;
            }

            .receipt-title, .modal-receipt-title {
                font-size: 1.4em;
            }

            .receipt-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }

            .receipt-value {
                text-align: left;
            }

            input[type="text"] {
                max-width: 100%;
            }

            .music-control {
                width: 50px;
                height: 50px;
                font-size: 1.2em;
            }

            .photo-section, .modal-photo-section {
                gap: 15px;
            }

            .photo-preview, .modal-photo-frame {
                width: 100px;
                height: 100px;
            }

            .modal-content {
                padding: 30px 20px;
            }
        }

        @media (max-width: 400px) {
            h1 {
                font-size: 1.5em;
            }

            .buttons {
                gap: 15px;
            }

            .photo-preview, .modal-photo-frame {
                width: 90px;
                height: 90px;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Slideshow Background -->
    <div class="slideshow-bg" id="slideshowBg">
        <div class="slide active"></div>
        <div class="slide"></div>
        <div class="slide"></div>
        <div class="slide"></div>
    </div>

    <!-- Floating Hearts Background -->
    <div class="heart-bg" id="heartBg"></div>

    <!-- Main Container -->
    <div class="container">
        <div class="card">
            <h1>Happy Valentine's Day ‚ù§Ô∏è</h1>
            <p class="message">
                Every moment with you feels like magic. I don't need the perfect day, I just need you. üíï
            </p>
            <p class="question">Will you be my Valentine?</p>
            
            <div class="buttons" id="buttonContainer">
                <button class="yes-btn" id="yesBtn">Yes üíñ</button>
                <button class="no-btn" id="noBtn">No üò¢</button>
            </div>

            <div class="playful-text" id="playfulText"></div>
            <div class="success-message" id="successMessage">
                You just made me the happiest person alive! üíò
            </div>

            <!-- Receipt Card -->
            <div class="receipt-card" id="receiptCard">
                <div class="receipt-title">Official Valentine Receipt üíå</div>
                
                <!-- Photo Upload Section -->
                <div class="photo-section">
                    <div class="photo-upload">
                        <div class="photo-preview" id="girlfriendPhotoPreview" onclick="document.getElementById('girlfriendPhoto').click()">
                            <img id="girlfriendPhotoImg" src="" alt="Girlfriend">
                            <div class="photo-placeholder">
                                <span>üì∑</span>
                                <div style="font-size: 0.8em;">Add Photo</div>
                            </div>
                        </div>
                        <div class="photo-label">Girlfriend</div>
                        <input type="file" id="girlfriendPhoto" accept="image/*">
                    </div>

                    <div class="photo-upload">
                        <div class="photo-preview" id="boyfriendPhotoPreview" onclick="document.getElementById('boyfriendPhoto').click()">
                            <img id="boyfriendPhotoImg" src="" alt="Boyfriend">
                            <div class="photo-placeholder">
                                <span>üì∑</span>
                                <div style="font-size: 0.8em;">Add Photo</div>
                            </div>
                        </div>
                        <div class="photo-label">Boyfriend</div>
                        <input type="file" id="boyfriendPhoto" accept="image/*">
                    </div>
                </div>

                <div class="receipt-row">
                    <span class="receipt-label">Girlfriend Name:</span>
                    <input type="text" id="girlfriendName" placeholder="Enter name">
                </div>

                <div class="receipt-row">
                    <span class="receipt-label">Boyfriend Name:</span>
                    <input type="text" id="boyfriendName" placeholder="Enter name">
                </div>

                <div class="receipt-row">
                    <span class="receipt-label">Date:</span>
                    <span class="receipt-value" id="currentDate"></span>
                </div>

                <div class="receipt-row">
                    <span class="receipt-label">Status:</span>
                    <span class="receipt-value">Officially Dating !! üíñ</span>
                </div>

                <button class="submit-btn" id="submitBtn">Submit üíï</button>

                <div class="receipt-footer">
                    Signature: Forever Yours ‚ú®
                </div>

                <button class="download-btn hidden" id="downloadBtn">Download Receipt üì•</button>
            </div>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div class="modal" id="receiptModal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">√ó</button>
            
            <div class="modal-receipt">
                <div class="modal-receipt-title">We're Official! üíñ</div>
                <p style="color: #555; margin-bottom: 20px; font-size: 1.1em;">
                    Our Valentine's Day Receipt
                </p>

                <!-- Photo Display -->
                <div class="modal-photo-section">
                    <div class="modal-photo-display">
                        <div class="modal-photo-frame" id="modalGirlfriendPhoto">
                            <div class="no-photo">No Photo</div>
                        </div>
                        <div class="photo-label">Girlfriend</div>
                    </div>

                    <div class="modal-photo-display">
                        <div class="modal-photo-frame" id="modalBoyfriendPhoto">
                            <div class="no-photo">No Photo</div>
                        </div>
                        <div class="photo-label">Boyfriend</div>
                    </div>
                </div>

                <!-- Receipt Info -->
                <div class="modal-info-row">
                    <span class="modal-info-label">Girlfriend:</span>
                    <span class="modal-info-value" id="modalGirlfriendName">-</span>
                </div>

                <div class="modal-info-row">
                    <span class="modal-info-label">Boyfriend:</span>
                    <span class="modal-info-value" id="modalBoyfriendName">-</span>
                </div>

                <div class="modal-info-row">
                    <span class="modal-info-label">Date:</span>
                    <span class="modal-info-value" id="modalDate">-</span>
                </div>

                <div class="modal-info-row" style="border-bottom: none;">
                    <span class="modal-info-label">Status:</span>
                    <span class="modal-info-value">Officially Dating !! üíñ</span>
                </div>

                <div class="modal-footer">
                    Signature: Forever Yours ‚ú®
                </div>

                <button class="modal-download-btn" id="modalDownloadBtn">Download Receipt üì•</button>
            </div>
        </div>
    </div>

    <!-- Music Control -->
    <div class="music-control" id="musicControl" title="Click to play music">
        üéµ
    </div>

    <!-- Audio Element -->
    <audio id="bgMusic" loop>
        <source src="./valentine.mp3" type="audio/mpeg">
        <source src="./valentine.ogg" type="audio/ogg">
        <source src="/valentine.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <script>
        // Slideshow functionality
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;

        function nextSlide() {
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + 1) % totalSlides;
            slides[currentSlide].classList.add('active');
        }

        // Change slide every 5 seconds
        setInterval(nextSlide, 5000);

        // Generate floating hearts
        function createFloatingHearts() {
            const heartBg = document.getElementById('heartBg');
            const hearts = ['üíú', 'üíó', 'üíñ', 'üíï', '‚ù§Ô∏è', 'üíò'];
            
            setInterval(() => {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
                heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
                heartBg.appendChild(heart);

                setTimeout(() => {
                    heart.remove();
                }, 8000);
            }, 800);
        }

        createFloatingHearts();

        // Photo upload functionality
        const girlfriendPhotoInput = document.getElementById('girlfriendPhoto');
        const girlfriendPhotoPreview = document.getElementById('girlfriendPhotoPreview');
        const girlfriendPhotoImg = document.getElementById('girlfriendPhotoImg');

        const boyfriendPhotoInput = document.getElementById('boyfriendPhoto');
        const boyfriendPhotoPreview = document.getElementById('boyfriendPhotoPreview');
        const boyfriendPhotoImg = document.getElementById('boyfriendPhotoImg');

        let girlfriendPhotoData = null;
        let boyfriendPhotoData = null;

        girlfriendPhotoInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    girlfriendPhotoData = e.target.result;
                    girlfriendPhotoImg.src = girlfriendPhotoData;
                    girlfriendPhotoPreview.classList.add('has-image');
                };
                reader.readAsDataURL(file);
            }
        });

        boyfriendPhotoInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    boyfriendPhotoData = e.target.result;
                    boyfriendPhotoImg.src = boyfriendPhotoData;
                    boyfriendPhotoPreview.classList.add('has-image');
                };
                reader.readAsDataURL(file);
            }
        });

        // Button elements
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const playfulText = document.getElementById('playfulText');
        const successMessage = document.getElementById('successMessage');
        const receiptCard = document.getElementById('receiptCard');
        const buttonContainer = document.getElementById('buttonContainer');
        const currentDateSpan = document.getElementById('currentDate');

        // Playful messages
        const playfulMessages = [
            'Are you sure? ü•∫',
            'Think again üòè',
            'Nice try üòÜ',
            'You can\'t escape love üíú',
            'Come on... üòò',
            'Really? ü§î',
            'Just say yes! üíï',
            'Don\'t make me sad üò¢'
        ];

        let messageIndex = 0;

        // No button hover/click - moves to random position
        function moveNoButton() {
            const container = buttonContainer.getBoundingClientRect();
            const button = noBtn.getBoundingClientRect();
            
            const maxX = container.width - button.width;
            const maxY = container.height;
            
            const randomX = Math.random() * maxX;
            const randomY = Math.random() * 50;
            
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
            
            // Show playful message
            playfulText.textContent = playfulMessages[messageIndex];
            messageIndex = (messageIndex + 1) % playfulMessages.length;
        }

        noBtn.addEventListener('mouseenter', moveNoButton);
        noBtn.addEventListener('click', moveNoButton);

        // Touch support for mobile
        noBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            moveNoButton();
        });

        // Yes button click
        yesBtn.addEventListener('click', () => {
            // Hide buttons and question
            buttonContainer.classList.add('hidden');
            document.querySelector('.question').classList.add('hidden');
            playfulText.textContent = '';

            // Show success message
            successMessage.style.display = 'block';

            // Create confetti explosion
            createConfetti();

            // Show receipt after 2 seconds
            setTimeout(() => {
                receiptCard.style.display = 'block';
                setCurrentDate();
            }, 2000);
        });

        // Create confetti
        function createConfetti() {
            const colors = ['#f5576c', '#764ba2', '#f093fb', '#667eea', '#ff6b9d'];
            const card = document.querySelector('.card');
            
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '50%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                    card.appendChild(confetti);

                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 30);
            }
        }

        // Set current date
        function setCurrentDate() {
            const today = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            currentDateSpan.textContent = today.toLocaleDateString('en-US', options);
        }

        // Submit button - Show modal
        const submitBtn = document.getElementById('submitBtn');
        const receiptModal = document.getElementById('receiptModal');
        const modalClose = document.getElementById('modalClose');

        submitBtn.addEventListener('click', () => {
            const girlfriendName = document.getElementById('girlfriendName').value || 'My Love';
            const boyfriendName = document.getElementById('boyfriendName').value || 'Your Valentine';
            const date = currentDateSpan.textContent;

            // Update modal content
            document.getElementById('modalGirlfriendName').textContent = girlfriendName;
            document.getElementById('modalBoyfriendName').textContent = boyfriendName;
            document.getElementById('modalDate').textContent = date;

            // Update modal photos
            const modalGirlfriendPhoto = document.getElementById('modalGirlfriendPhoto');
            const modalBoyfriendPhoto = document.getElementById('modalBoyfriendPhoto');

            if (girlfriendPhotoData) {
                modalGirlfriendPhoto.innerHTML = `<img src="${girlfriendPhotoData}" alt="Girlfriend">`;
            } else {
                modalGirlfriendPhoto.innerHTML = '<div class="no-photo">No Photo</div>';
            }

            if (boyfriendPhotoData) {
                modalBoyfriendPhoto.innerHTML = `<img src="${boyfriendPhotoData}" alt="Boyfriend">`;
            } else {
                modalBoyfriendPhoto.innerHTML = '<div class="no-photo">No Photo</div>';
            }

            // Show modal
            receiptModal.classList.add('show');

            // Show download button in main card
            document.getElementById('downloadBtn').classList.remove('hidden');
        });

        // Close modal
        modalClose.addEventListener('click', () => {
            receiptModal.classList.remove('show');
        });

        // Close modal when clicking outside
        receiptModal.addEventListener('click', (e) => {
            if (e.target === receiptModal) {
                receiptModal.classList.remove('show');
            }
        });

        // Download receipt (main button)
        document.getElementById('downloadBtn').addEventListener('click', downloadReceipt);
        document.getElementById('modalDownloadBtn').addEventListener('click', downloadReceipt);

        function downloadReceipt() {
            const girlfriendName = document.getElementById('girlfriendName').value || 'My Love';
            const boyfriendName = document.getElementById('boyfriendName').value || 'Your Valentine';
            const date = currentDateSpan.textContent;

            const receiptText = `
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üíå Official Valentine Receipt üíå
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Girlfriend Name: ${girlfriendName}
Boyfriend Name: ${boyfriendName}
Date: ${date}
Status: Officially Dating !! üíñ

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Signature: Forever Yours ‚ú®
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            `;

            const blob = new Blob([receiptText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'valentine-receipt.txt';
            a.click();
            URL.revokeObjectURL(url);

            alert('Receipt downloaded! üíú');
        }

        // Music control functionality
        const musicControl = document.getElementById('musicControl');
        const bgMusic = document.getElementById('bgMusic');
        let isPlaying = false;

        musicControl.addEventListener('click', () => {
            if (isPlaying) {
                bgMusic.pause();
                musicControl.textContent = 'üéµ';
                musicControl.classList.remove('playing');
                musicControl.title = 'Click to play music';
            } else {
                bgMusic.play().then(() => {
                    musicControl.textContent = 'üîä';
                    musicControl.classList.add('playing');
                    musicControl.title = 'Click to pause music';
                }).catch((error) => {
                    console.error('Error playing audio:', error);
                    alert('Unable to play music. Make sure the valentine.mp3 file is in the same folder as this HTML file.');
                });
            }
            isPlaying = !isPlaying;
        });

        // Auto-play music on first user interaction (required by browsers)
        let hasInteracted = false;
        function tryAutoPlay() {
            if (!hasInteracted) {
                hasInteracted = true;
                bgMusic.play().then(() => {
                    isPlaying = true;
                    musicControl.textContent = 'üîä';
                    musicControl.classList.add('playing');
                    musicControl.title = 'Click to pause music';
                }).catch(() => {
                    // Autoplay blocked, user needs to click music button
                    console.log('Autoplay blocked - click music button to play');
                });
            }
        }

        // Try to play on first click anywhere
        document.addEventListener('click', tryAutoPlay, { once: true });
    </script>
</body>
</html>